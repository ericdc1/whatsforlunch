@model Lunch.Website.ViewModels.ImportRestaurantsViewModel

@{
    ViewBag.Title = "DisplayRestaurants";
}

<h2>Display Restaurants</h2>

@if (Model == null || Model.Restaurants.Count == 0)
{
    
} else
{
    using (Html.BeginForm()) {
        @Html.ValidationSummary(true)

        <fieldset>
            <legend>Restaurants List</legend>

                <table>
                    <tbody>
                         <tr>
                            <th colspan="3">
                                Search: <input id="searchbox" type="text" url="/Management/Search" />
                            </th>
                        </tr>
                
                        @for (var i= 0; i < Model.Restaurants.Count; i++)
                        {
                            <tr>
                                <td>@Html.EditorFor(model => model.Restaurants[i].Selected)</td>
                                <td>@(i + 1). @Model.Restaurants[i].Name</td>
                                <td>@Html.DropDownListFor(model => model.Restaurants[i].SpecialDay, (SelectList)ViewBag.DaysOfWekk, "-- NONE --")</td>
                            </tr>
                        }

                    </tbody>
                </table>        

            <p>
                <input type="submit" value="Save" />
            </p>

        </fieldset>
    }
}

<script type="text/javascript">

    $(document).ready(function () {

        $('#searchbox').change(function() {
            var url = $(this).attr('url').val();
            alert(url);
            //$.ajax({
            //    url: url,

            //});
        });

    });

</script>